syntax = "proto3";

package xray.app.proxyman.command;
option go_package = "github.com/xtls/xray-core/app/proxyman/command";

import "common/protocol/user.proto";
import "common/serial/typed_message.proto";
import "core/config.proto";

service HandlerService {
  rpc AddInbound(AddInboundRequest) returns (AddInboundResponse) {}
  rpc RemoveInbound(RemoveInboundRequest) returns (RemoveInboundResponse) {}
  rpc AlterInbound(AlterInboundRequest) returns (AlterInboundResponse) {}
  rpc AddOutbound(AddOutboundRequest) returns (AddOutboundResponse) {}
  rpc RemoveOutbound(RemoveOutboundRequest) returns (RemoveOutboundResponse) {}
  rpc AlterOutbound(AlterOutboundRequest) returns (AlterOutboundResponse) {}
}

message AddInboundRequest {
  xray.core.InboundHandlerConfig inbound = 1;
}

message AddInboundResponse {}

message RemoveInboundRequest {
  string tag = 1;
}

message RemoveInboundResponse {}

message AlterInboundRequest {
  string tag = 1;
  xray.common.serial.TypedMessage operation = 2;
}

message AlterInboundResponse {}

message AddOutboundRequest {
  xray.core.OutboundHandlerConfig outbound = 1;
}

message AddOutboundResponse {}

message RemoveOutboundRequest {
  string tag = 1;
}

message RemoveOutboundResponse {}

message AlterOutboundRequest {
  string tag = 1;
  xray.common.serial.TypedMessage operation = 2;
}

message AlterOutboundResponse {}

message AddUserOperation {
  xray.common.protocol.User user = 1;
}

message RemoveUserOperation {
  string email = 1;
}

